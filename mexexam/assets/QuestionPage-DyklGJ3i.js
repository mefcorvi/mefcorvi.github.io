import{q as oe,a as C,k as ae,v as re,y as T,J as o,u as e,T as ie,p as ce,x as i,E as a,O as w,L as $,D as u,F as l,G as f,H as O,I as Q,w as ue,M as le,n as de}from"./vendor-CiK06CAF.js";import{u as _e,G as ve,m as ge,S as we,_ as fe}from"./localization-j0kxW-jG.js";import{G as pe}from"./GeneralButton-DycYHCBZ.js";import{a as me}from"./questions-ceva1npV.js";import{d as D,e as ke}from"./utils-DsLRjVzv.js";import{u as Ae,a as Ce}from"./activatable-effect-BqOYSoqW.js";import{R as G}from"./index-CHph-j5F.js";import{u as he}from"./preferences-DTDz8vIr.js";import"./statistics-BywHeOGk.js";const be=oe({__name:"QuestionPage",setup(Ve){const n=ie(),p=ce(),S=me(),{locale:_,getLanguageName:L}=_e(),{showNotes:M}=he(),{startAll:z,startSection:E,stat:h,isAnswerRevealed:N,currentOptionsRandomized:q,currentQuestion:r,getRandomQuestionId:I,revealAnswer:H,selectAnswer:U,updateCounters:J,selectedAnswer:d,setQuestion:K,hasQuestion:j}=Ae(),m=D("id",""),W=D("sectionId",""),v=C(),X=()=>{if(m.value!=="")if(v.value=void 0,j(m.value))K(m.value);else{const t=I();if(!t){p.replace({name:G.Home});return}p.replace({params:{id:t}})}},b=C(!1);Ce(()=>{ue(()=>[m.value,W.value],async(t,s)=>{s||(s=["",""]),!(!t[0]&&!t[1])&&(t[0]===s[0]&&t[1]===s[1]||((t[1]!==s[1]||!s[1])&&(t[1]?(b.value=!1,await E(t[1])):b.value||(b.value=!0,await z())),X()))},{immediate:!0})},{immediate:!0});let P;const y=C(!1);let g;const Y=()=>{v.value=void 0,window.clearTimeout(P),g=void 0,window.clearTimeout(g),y.value=!0,g=window.setTimeout(async()=>{g=void 0,await p.replace({params:{id:I()}}),await ke(d).toBeUndefined(),await de(),y.value=!1},parseInt(n.pageFadeOutDuration,10))},x=()=>{var t,s;if(!g&&!(((t=r.value)==null?void 0:t.type)==="choice"&&!d.value)){if(((s=r.value)==null?void 0:s.type)==="text"&&!N.value){H();return}Y()}},Z=t=>{const s=[];return t.id===-1&&s.push(n.dontKnowOption),d.value?d.value.isAnswer?t===d.value?n.correct:(s.push(n["wrong-fade"]),s):t===v.value?(s.push(n["correct-blinking"]),s):t.isAnswer?(s.push(n.correct),s):(s.push(n.wrong),s):s},V=t=>{if(d.value){x();return}if(U(t),J(),!t.isAnswer){const s=q.value.find(c=>c.isAnswer);v.value=s}P=window.setTimeout(()=>{v.value=void 0},1e3)},B=C(!0),F=ae(()=>B.value?"es":_.value),ee=t=>{ne(t)||x()},R=()=>{var t;(t=window.getSelection())!=null&&t.isCollapsed&&(B.value=!B.value)},k=t=>S.t(F.value,t),te=t=>S.t(_.value,t),se=()=>{p.push({name:G.Settings})};function ne(t){const s=t.target;return s.tagName==="BUTTON"||s.tagName==="A"}return(t,s)=>(i(),re(ve,{onClick:ee,class:o({[e(n).fadeOut]:y.value}),reserveSpace:!1},{topBar:T(()=>[a("div",{class:o(e(n).navigation)},[a("div",{onClick:w(se,["stop"])},[$(we,{type:"mdi",path:e(ge)},null,8,["path"])])],2)]),default:T(()=>[e(r)?(i(),u("div",{key:0,class:o(e(n).question)},[a("div",{class:o(e(n).progress)},[a("div",{class:o(e(n).correctAnswers)},l(e(h).correctQuestions),3),a("div",{class:o(e(n).wrongAnswers)},l(e(h).wrongQuestions),3),a("div",{class:o(e(n).allAnswers)},l(e(h).totalQuestions),3)],2),a("div",{class:o(e(n).text),onClick:w(R,["stop"])},[a("div",null,[a("div",{class:o(e(n).sectionTitle)},l(k(e(r).section.title)),3),a("div",null,l(k(e(r).question)),1)])],2),a("div",{class:o(e(n).languageButtonContainer)},[e(_)!=="es"?(i(),u("div",{key:0,onClick:w(R,["stop"]),class:o(e(n).languageButton)},[a("span",{class:o(e(n).languageLabel)},"â†’ "+l(F.value===e(_)?e(L)("es"):e(L)(e(_))),3)],2)):f("",!0)],2),a("div",{class:o(e(n).answers)},[e(r).type==="choice"?(i(!0),u(O,{key:0},Q(e(q),c=>(i(),u("div",{key:`${e(r).id}-${c.id}`,class:o(e(n).option)},[$(pe,{onClick:w(A=>V(c),["stop"]),disabled:!!e(d),class:o([e(n).button,Z(c)])},{default:T(()=>[le(l(k(c.value)),1)]),_:2},1032,["onClick","disabled","class"])],2))),128)):f("",!0),e(r).type==="text"?(i(),u("div",{key:1,class:o([e(n).answer,e(N)?"":e(n).hiddenAnswer]),onClick:w(x,["stop"])},[(i(!0),u(O,null,Q(k(e(r).answer).split(`
`),(c,A)=>(i(),u("p",{key:A},l(c),1))),128))],2)):f("",!0),e(d)&&e(r).note&&e(M)?(i(),u("div",{key:2,class:o(e(n).note)},[(i(!0),u(O,null,Q(te(e(r).note).split(`
`),(c,A)=>(i(),u("p",{key:A},l(c),1))),128))],2)):f("",!0)],2)],2)):f("",!0)]),_:1},8,["class"]))}}),ye="100ms",xe="_counter_381ov_4",Be="_question_381ov_8",Te="_text_381ov_14",Oe="_languageButtonContainer_381ov_45",Qe="_answers_381ov_52",Se="_option_381ov_63",Le="_fadeOut_381ov_67",Ne="_button_381ov_73",qe="_correct_381ov_73",Ie="_success_381ov_1",Pe="_wrong_381ov_80",Fe="_next_381ov_87",Re="_answer_381ov_52",$e="_hiddenAnswer_381ov_100",De="_navigation_381ov_103",Ge="_back_381ov_110",Me="_forward_381ov_114",ze="_disabled_381ov_123",Ee="_progress_381ov_127",He="_correctAnswers_381ov_145",Ue="_wrongAnswers_381ov_149",Je="_allAnswers_381ov_153",Ke="_sectionTitle_381ov_168",je="_languageButton_381ov_45",We="_languageLabel_381ov_193",Xe="_note_381ov_197",Ye={pageFadeOutDuration:ye,counter:xe,question:Be,text:Te,languageButtonContainer:Oe,answers:Qe,option:Se,fadeOut:Le,button:Ne,correct:qe,"correct-blinking":"_correct-blinking_381ov_77",success:Ie,wrong:Pe,"wrong-fade":"_wrong-fade_381ov_84",next:Fe,answer:Re,hiddenAnswer:$e,navigation:De,back:Ge,forward:Me,disabled:ze,progress:Ee,correctAnswers:He,wrongAnswers:Ue,allAnswers:Je,sectionTitle:Ke,languageButton:je,languageLabel:We,note:Xe},Ze={$style:Ye},ut=fe(be,[["__cssModules",Ze]]);export{ut as default};
