import{d as se,x as m,h as ne,m as ae,i as oe,j as y,n as a,b as e,B as re,q as ie,o as c,a as o,w,k as P,t as l,c as d,f as x,F,r as R,s as ce,R as $,C as le,D as ue}from"./index-Z7MhvD_Q.js";import{u as de,G as _e,m as ge,S as we,_ as ve}from"./localization-DkyWKAVE.js";import{G as fe}from"./GeneralButton-DawacK65.js";import{a as pe}from"./questions-DoP2xHrR.js";import{u as he,a as D}from"./free-session-DW9_cro8.js";const me=se({__name:"QuestionPage",setup(Je){const n=re(),v=ie(),G=pe(),{locale:f,getLanguageName:T}=de(),{startAll:M,startSection:z,stat:k,isAnswerRevealed:O,currentOptionsRandomized:Q,currentQuestion:r,getRandomQuestionId:L,revealAnswer:U,selectAnswer:j,updateCounters:E,selectedAnswer:u,setQuestion:H,hasQuestion:K}=he(),p=D("id",""),J=D("sectionId",""),_=m(),W=()=>{if(p.value!=="")if(_.value=void 0,K(p.value))H(p.value);else{const t=L();if(!t){v.replace({name:$.Home});return}v.replace({params:{id:t}})}},A=m(!1);ne(()=>[p.value,J.value],async(t,s)=>{s||(s=["",""]),!(!t[0]&&!t[1])&&(t[0]===s[0]&&t[1]===s[1]||((t[1]!==s[1]||!s[1])&&(t[1]?(A.value=!1,await z(t[1])):A.value||(A.value=!0,await M())),W()))},{immediate:!0});let S;const C=m(!1);let g;const X=()=>{_.value=void 0,window.clearTimeout(S),g=void 0,window.clearTimeout(g),C.value=!0,g=window.setTimeout(async()=>{g=void 0,await v.replace({params:{id:L()}}),await le(u).toBeUndefined(),await ue(),C.value=!1},parseInt(n.pageFadeOutDuration,10))},b=()=>{var t,s;if(!g&&!(((t=r.value)==null?void 0:t.type)==="choice"&&!u.value)){if(((s=r.value)==null?void 0:s.type)==="text"&&!O.value){U();return}X()}},Y=t=>{const s=[];return t.id===-1&&s.push(n.dontKnowOption),u.value?u.value.isAnswer?t===u.value?n.correct:(s.push(n["wrong-fade"]),s):t===_.value?(s.push(n["correct-blinking"]),s):t.isAnswer?(s.push(n.correct),s):(s.push(n.wrong),s):s},Z=t=>{if(u.value){b();return}if(j(t),E(),!t.isAnswer){const s=Q.value.find(i=>i.isAnswer);_.value=s}S=window.setTimeout(()=>{_.value=void 0},1e3)},B=m(!1),q=ae(()=>B.value?"es":f.value),V=t=>{te(t)||b()},N=()=>{var t;(t=window.getSelection())!=null&&t.isCollapsed&&(B.value=!B.value)},h=t=>G.t(q.value,t),ee=()=>{v.push({name:$.Settings})};function te(t){const s=t.target;return s.tagName==="BUTTON"||s.tagName==="A"}return(t,s)=>(c(),oe(_e,{onClick:V,class:a({[e(n).fadeOut]:C.value})},{topBar:y(()=>[o("div",{class:a(e(n).navigation)},[o("div",{onClick:w(ee,["stop"])},[P(we,{type:"mdi",path:e(ge)},null,8,["path"])])],2)]),default:y(()=>[o("div",{class:a(e(n).progress)},[o("div",{class:a(e(n).correctAnswers)},l(e(k).correctQuestions),3),o("div",{class:a(e(n).wrongAnswers)},l(e(k).wrongQuestions),3),o("div",{class:a(e(n).allAnswers)},l(e(k).totalQuestions),3)],2),e(r)?(c(),d("div",{key:0,class:a(e(n).question)},[o("div",{class:a(e(n).text),onClick:w(N,["stop"])},[o("div",null,[o("div",{class:a(e(n).sectionTitle)},l(h(e(r).section.title)),3),o("div",null,l(h(e(r).question)),1)])],2),o("div",{class:a(e(n).languageButtonContainer)},[e(f)!=="es"?(c(),d("div",{key:0,onClick:w(N,["stop"]),class:a(e(n).languageButton)},[o("span",{class:a(e(n).languageLabel)},"â†’ "+l(q.value===e(f)?e(T)("es"):e(T)(e(f))),3)],2)):x("",!0)],2),o("div",{class:a(e(n).answers)},[e(r).type==="choice"?(c(!0),d(F,{key:0},R(e(Q),i=>(c(),d("div",{key:`${e(r).id}-${i.id}`,class:a(e(n).option)},[P(fe,{onClick:w(I=>Z(i),["stop"]),disabled:!!e(u),class:a([e(n).button,Y(i)])},{default:y(()=>[ce(l(h(i.value)),1)]),_:2},1032,["onClick","disabled","class"])],2))),128)):x("",!0),e(r).type==="text"?(c(),d("div",{key:1,class:a([e(n).answer,e(O)?"":e(n).hiddenAnswer]),onClick:w(b,["stop"])},[(c(!0),d(F,null,R(h(e(r).answer).split(`
`),(i,I)=>(c(),d("p",{key:I},l(i),1))),128))],2)):x("",!0)],2)],2)):x("",!0)]),_:1},8,["class"]))}}),xe="100ms",ke="_counter_4hl4x_4",Ae="_question_4hl4x_8",Ce="_text_4hl4x_15",be="_languageButtonContainer_4hl4x_46",Be="_answers_4hl4x_53",ye="_option_4hl4x_64",Te="_fadeOut_4hl4x_68",Oe="_button_4hl4x_74",Qe="_correct_4hl4x_74",Le="_success_4hl4x_1",Se="_wrong_4hl4x_81",qe="_next_4hl4x_88",Ne="_answer_4hl4x_53",Ie="_hiddenAnswer_4hl4x_101",Pe="_navigation_4hl4x_104",Fe="_back_4hl4x_111",Re="_forward_4hl4x_115",$e="_disabled_4hl4x_124",De="_progress_4hl4x_128",Ge="_correctAnswers_4hl4x_142",Me="_wrongAnswers_4hl4x_146",ze="_allAnswers_4hl4x_150",Ue="_sectionTitle_4hl4x_165",je="_languageButton_4hl4x_46",Ee="_languageLabel_4hl4x_190",He={pageFadeOutDuration:xe,counter:ke,question:Ae,text:Ce,languageButtonContainer:be,answers:Be,option:ye,fadeOut:Te,button:Oe,correct:Qe,"correct-blinking":"_correct-blinking_4hl4x_78",success:Le,wrong:Se,"wrong-fade":"_wrong-fade_4hl4x_85",next:qe,answer:Ne,hiddenAnswer:Ie,navigation:Pe,back:Fe,forward:Re,disabled:$e,progress:De,correctAnswers:Ge,wrongAnswers:Me,allAnswers:ze,sectionTitle:Ue,languageButton:je,languageLabel:Ee},Ke={$style:He},et=ve(me,[["__cssModules",Ke]]);export{et as default};
