import{q as se,a as k,w as ne,k as ae,v as oe,y as x,F as a,u as e,T as re,p as ie,x as c,E as o,J as f,N as I,D as g,H as u,I as z,L as P,M as F,O as ce,n as ue}from"./vendor-mc0iK3xg.js";import{u as le,G as ge,m as de,S as _e,_ as fe}from"./localization-QLD0gGgw.js";import{G as we}from"./GeneralButton-BYWT996q.js";import{a as ve}from"./questions-pKEcFAiO.js";import{e as R,f as pe}from"./utils-BRnDto5j.js";import{u as me}from"./free-session-BOHaJEcW.js";import{R as $}from"./index-bXthTX__.js";const ke=se({__name:"QuestionPage",setup(je){const n=re(),w=ie(),D=ve(),{locale:v,getLanguageName:B}=le(),{startAll:M,startSection:G,stat:A,isAnswerRevealed:T,currentOptionsRandomized:O,currentQuestion:r,getRandomQuestionId:Q,revealAnswer:E,selectAnswer:H,updateCounters:U,selectedAnswer:l,setQuestion:J,hasQuestion:K}=me(),p=R("id",""),j=R("sectionId",""),d=k(),W=()=>{if(p.value!=="")if(d.value=void 0,K(p.value))J(p.value);else{const t=Q();if(!t){w.replace({name:$.Home});return}w.replace({params:{id:t}})}},C=k(!1);ne(()=>[p.value,j.value],async(t,s)=>{s||(s=["",""]),!(!t[0]&&!t[1])&&(t[0]===s[0]&&t[1]===s[1]||((t[1]!==s[1]||!s[1])&&(t[1]?(C.value=!1,await G(t[1])):C.value||(C.value=!0,await M())),W()))},{immediate:!0});let L;const h=k(!1);let _;const X=()=>{d.value=void 0,window.clearTimeout(L),_=void 0,window.clearTimeout(_),h.value=!0,_=window.setTimeout(async()=>{_=void 0,await w.replace({params:{id:Q()}}),await pe(l).toBeUndefined(),await ue(),h.value=!1},parseInt(n.pageFadeOutDuration,10))},b=()=>{var t,s;if(!_&&!(((t=r.value)==null?void 0:t.type)==="choice"&&!l.value)){if(((s=r.value)==null?void 0:s.type)==="text"&&!T.value){E();return}X()}},Y=t=>{const s=[];return t.id===-1&&s.push(n.dontKnowOption),l.value?l.value.isAnswer?t===l.value?n.correct:(s.push(n["wrong-fade"]),s):t===d.value?(s.push(n["correct-blinking"]),s):t.isAnswer?(s.push(n.correct),s):(s.push(n.wrong),s):s},Z=t=>{if(l.value){b();return}if(H(t),U(),!t.isAnswer){const s=O.value.find(i=>i.isAnswer);d.value=s}L=window.setTimeout(()=>{d.value=void 0},1e3)},y=k(!0),S=ae(()=>y.value?"es":v.value),V=t=>{te(t)||b()},N=()=>{var t;(t=window.getSelection())!=null&&t.isCollapsed&&(y.value=!y.value)},m=t=>D.t(S.value,t),ee=()=>{w.push({name:$.Settings})};function te(t){const s=t.target;return s.tagName==="BUTTON"||s.tagName==="A"}return(t,s)=>(c(),oe(ge,{onClick:V,class:a({[e(n).fadeOut]:h.value}),reserveSpace:!1},{topBar:x(()=>[o("div",{class:a(e(n).navigation)},[o("div",{onClick:f(ee,["stop"])},[I(_e,{type:"mdi",path:e(de)},null,8,["path"])])],2)]),default:x(()=>[e(r)?(c(),g("div",{key:0,class:a(e(n).question)},[o("div",{class:a(e(n).progress)},[o("div",{class:a(e(n).correctAnswers)},u(e(A).correctQuestions),3),o("div",{class:a(e(n).wrongAnswers)},u(e(A).wrongQuestions),3),o("div",{class:a(e(n).allAnswers)},u(e(A).totalQuestions),3)],2),o("div",{class:a(e(n).text),onClick:f(N,["stop"])},[o("div",null,[o("div",{class:a(e(n).sectionTitle)},u(m(e(r).section.title)),3),o("div",null,u(m(e(r).question)),1)])],2),o("div",{class:a(e(n).languageButtonContainer)},[e(v)!=="es"?(c(),g("div",{key:0,onClick:f(N,["stop"]),class:a(e(n).languageButton)},[o("span",{class:a(e(n).languageLabel)},"â†’ "+u(S.value===e(v)?e(B)("es"):e(B)(e(v))),3)],2)):z("",!0)],2),o("div",{class:a(e(n).answers)},[e(r).type==="choice"?(c(!0),g(P,{key:0},F(e(O),i=>(c(),g("div",{key:`${e(r).id}-${i.id}`,class:a(e(n).option)},[I(we,{onClick:f(q=>Z(i),["stop"]),disabled:!!e(l),class:a([e(n).button,Y(i)])},{default:x(()=>[ce(u(m(i.value)),1)]),_:2},1032,["onClick","disabled","class"])],2))),128)):z("",!0),e(r).type==="text"?(c(),g("div",{key:1,class:a([e(n).answer,e(T)?"":e(n).hiddenAnswer]),onClick:f(b,["stop"])},[(c(!0),g(P,null,F(m(e(r).answer).split(`
`),(i,q)=>(c(),g("p",{key:q},u(i),1))),128))],2)):z("",!0)],2)],2)):z("",!0)]),_:1},8,["class"]))}}),ze="100ms",Ae="_counter_1fg5z_4",Ce="_question_1fg5z_8",he="_text_1fg5z_14",be="_languageButtonContainer_1fg5z_45",ye="_answers_1fg5z_52",xe="_option_1fg5z_63",Be="_fadeOut_1fg5z_67",Te="_button_1fg5z_73",Oe="_correct_1fg5z_73",Qe="_success_1fg5z_1",Le="_wrong_1fg5z_80",Se="_next_1fg5z_87",Ne="_answer_1fg5z_52",qe="_hiddenAnswer_1fg5z_100",Ie="_navigation_1fg5z_103",Pe="_back_1fg5z_110",Fe="_forward_1fg5z_114",Re="_disabled_1fg5z_123",$e="_progress_1fg5z_127",De="_correctAnswers_1fg5z_145",Me="_wrongAnswers_1fg5z_149",Ge="_allAnswers_1fg5z_153",Ee="_sectionTitle_1fg5z_168",He="_languageButton_1fg5z_45",Ue="_languageLabel_1fg5z_193",Je={pageFadeOutDuration:ze,counter:Ae,question:Ce,text:he,languageButtonContainer:be,answers:ye,option:xe,fadeOut:Be,button:Te,correct:Oe,"correct-blinking":"_correct-blinking_1fg5z_77",success:Qe,wrong:Le,"wrong-fade":"_wrong-fade_1fg5z_84",next:Se,answer:Ne,hiddenAnswer:qe,navigation:Ie,back:Pe,forward:Fe,disabled:Re,progress:$e,correctAnswers:De,wrongAnswers:Me,allAnswers:Ge,sectionTitle:Ee,languageButton:He,languageLabel:Ue},Ke={$style:Je},st=fe(ke,[["__cssModules",Ke]]);export{st as default};
