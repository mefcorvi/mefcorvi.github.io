import{q as ne,a as C,k as oe,v as ae,y as T,F as o,u as e,T as re,p as ie,x as i,E as a,J as w,N as $,D as u,H as l,I as f,L as O,M as Q,w as ce,O as ue,n as le}from"./vendor-CXXHn2XU.js";import{u as de,G as _e,m as ve,S as ge,_ as we}from"./localization-B52_MNtf.js";import{G as fe}from"./GeneralButton-CQKCb64n.js";import{a as pe}from"./questions-9F30Y7fw.js";import{e as D,f as me}from"./utils-IZsLTAvW.js";import{u as ke,a as Ae}from"./activatable-effect-Dq7S8Apc.js";import{R as M}from"./index-BtIvcZG7.js";const Ce=ne({__name:"QuestionPage",setup(Ye){const n=re(),p=ie(),L=pe(),{locale:_,getLanguageName:S}=de(),{startAll:G,startSection:z,stat:b,isAnswerRevealed:N,currentOptionsRandomized:q,currentQuestion:r,getRandomQuestionId:I,revealAnswer:E,selectAnswer:H,updateCounters:U,selectedAnswer:d,setQuestion:J,hasQuestion:K}=ke(),m=D("id",""),j=D("sectionId",""),v=C(),W=()=>{if(m.value!=="")if(v.value=void 0,K(m.value))J(m.value);else{const t=I();if(!t){p.replace({name:M.Home});return}p.replace({params:{id:t}})}},h=C(!1);Ae(()=>{ce(()=>[m.value,j.value],async(t,s)=>{s||(s=["",""]),!(!t[0]&&!t[1])&&(t[0]===s[0]&&t[1]===s[1]||((t[1]!==s[1]||!s[1])&&(t[1]?(h.value=!1,await z(t[1])):h.value||(h.value=!0,await G())),W()))},{immediate:!0})},{immediate:!0});let P;const y=C(!1);let g;const X=()=>{v.value=void 0,window.clearTimeout(P),g=void 0,window.clearTimeout(g),y.value=!0,g=window.setTimeout(async()=>{g=void 0,await p.replace({params:{id:I()}}),await me(d).toBeUndefined(),await le(),y.value=!1},parseInt(n.pageFadeOutDuration,10))},x=()=>{var t,s;if(!g&&!(((t=r.value)==null?void 0:t.type)==="choice"&&!d.value)){if(((s=r.value)==null?void 0:s.type)==="text"&&!N.value){E();return}X()}},Y=t=>{const s=[];return t.id===-1&&s.push(n.dontKnowOption),d.value?d.value.isAnswer?t===d.value?n.correct:(s.push(n["wrong-fade"]),s):t===v.value?(s.push(n["correct-blinking"]),s):t.isAnswer?(s.push(n.correct),s):(s.push(n.wrong),s):s},Z=t=>{if(d.value){x();return}if(H(t),U(),!t.isAnswer){const s=q.value.find(c=>c.isAnswer);v.value=s}P=window.setTimeout(()=>{v.value=void 0},1e3)},B=C(!0),F=oe(()=>B.value?"es":_.value),V=t=>{se(t)||x()},R=()=>{var t;(t=window.getSelection())!=null&&t.isCollapsed&&(B.value=!B.value)},k=t=>L.t(F.value,t),ee=t=>L.t(_.value,t),te=()=>{p.push({name:M.Settings})};function se(t){const s=t.target;return s.tagName==="BUTTON"||s.tagName==="A"}return(t,s)=>(i(),ae(_e,{onClick:V,class:o({[e(n).fadeOut]:y.value}),reserveSpace:!1},{topBar:T(()=>[a("div",{class:o(e(n).navigation)},[a("div",{onClick:w(te,["stop"])},[$(ge,{type:"mdi",path:e(ve)},null,8,["path"])])],2)]),default:T(()=>[e(r)?(i(),u("div",{key:0,class:o(e(n).question)},[a("div",{class:o(e(n).progress)},[a("div",{class:o(e(n).correctAnswers)},l(e(b).correctQuestions),3),a("div",{class:o(e(n).wrongAnswers)},l(e(b).wrongQuestions),3),a("div",{class:o(e(n).allAnswers)},l(e(b).totalQuestions),3)],2),a("div",{class:o(e(n).text),onClick:w(R,["stop"])},[a("div",null,[a("div",{class:o(e(n).sectionTitle)},l(k(e(r).section.title)),3),a("div",null,l(k(e(r).question)),1)])],2),a("div",{class:o(e(n).languageButtonContainer)},[e(_)!=="es"?(i(),u("div",{key:0,onClick:w(R,["stop"]),class:o(e(n).languageButton)},[a("span",{class:o(e(n).languageLabel)},"â†’ "+l(F.value===e(_)?e(S)("es"):e(S)(e(_))),3)],2)):f("",!0)],2),a("div",{class:o(e(n).answers)},[e(r).type==="choice"?(i(!0),u(O,{key:0},Q(e(q),c=>(i(),u("div",{key:`${e(r).id}-${c.id}`,class:o(e(n).option)},[$(fe,{onClick:w(A=>Z(c),["stop"]),disabled:!!e(d),class:o([e(n).button,Y(c)])},{default:T(()=>[ue(l(k(c.value)),1)]),_:2},1032,["onClick","disabled","class"])],2))),128)):f("",!0),e(r).type==="text"?(i(),u("div",{key:1,class:o([e(n).answer,e(N)?"":e(n).hiddenAnswer]),onClick:w(x,["stop"])},[(i(!0),u(O,null,Q(k(e(r).answer).split(`
`),(c,A)=>(i(),u("p",{key:A},l(c),1))),128))],2)):f("",!0),e(d)&&e(r).note?(i(),u("div",{key:2,class:o(e(n).note)},[(i(!0),u(O,null,Q(ee(e(r).note).split(`
`),(c,A)=>(i(),u("p",{key:A},l(c),1))),128))],2)):f("",!0)],2)],2)):f("",!0)]),_:1},8,["class"]))}}),be="100ms",he="_counter_381ov_4",ye="_question_381ov_8",xe="_text_381ov_14",Be="_languageButtonContainer_381ov_45",Te="_answers_381ov_52",Oe="_option_381ov_63",Qe="_fadeOut_381ov_67",Le="_button_381ov_73",Se="_correct_381ov_73",Ne="_success_381ov_1",qe="_wrong_381ov_80",Ie="_next_381ov_87",Pe="_answer_381ov_52",Fe="_hiddenAnswer_381ov_100",Re="_navigation_381ov_103",$e="_back_381ov_110",De="_forward_381ov_114",Me="_disabled_381ov_123",Ge="_progress_381ov_127",ze="_correctAnswers_381ov_145",Ee="_wrongAnswers_381ov_149",He="_allAnswers_381ov_153",Ue="_sectionTitle_381ov_168",Je="_languageButton_381ov_45",Ke="_languageLabel_381ov_193",je="_note_381ov_197",We={pageFadeOutDuration:be,counter:he,question:ye,text:xe,languageButtonContainer:Be,answers:Te,option:Oe,fadeOut:Qe,button:Le,correct:Se,"correct-blinking":"_correct-blinking_381ov_77",success:Ne,wrong:qe,"wrong-fade":"_wrong-fade_381ov_84",next:Ie,answer:Pe,hiddenAnswer:Fe,navigation:Re,back:$e,forward:De,disabled:Me,progress:Ge,correctAnswers:ze,wrongAnswers:Ee,allAnswers:He,sectionTitle:Ue,languageButton:Je,languageLabel:Ke,note:je},Xe={$style:We},at=we(Ce,[["__cssModules",Xe]]);export{at as default};
