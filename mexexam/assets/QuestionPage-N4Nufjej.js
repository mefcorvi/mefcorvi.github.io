import{q as se,a as k,k as ne,v as ae,y as x,F as a,u as e,T as oe,p as re,x as c,E as o,J as f,N as I,D as g,H as u,I as z,L as P,M as F,w as ie,O as ce,n as ue}from"./vendor-CXXHn2XU.js";import{u as le,G as ge,m as de,S as _e,_ as fe}from"./localization-DANo7O-j.js";import{G as we}from"./GeneralButton-Bv87UReP.js";import{a as ve}from"./questions-Da4L8cW4.js";import{e as R,f as pe}from"./utils-IZsLTAvW.js";import{u as me,a as ke}from"./activatable-effect-YGzFlB-f.js";import{R as $}from"./index-D_EXeHf2.js";const ze=se({__name:"QuestionPage",setup(We){const n=oe(),w=re(),D=ve(),{locale:v,getLanguageName:B}=le(),{startAll:M,startSection:G,stat:A,isAnswerRevealed:T,currentOptionsRandomized:O,currentQuestion:r,getRandomQuestionId:Q,revealAnswer:E,selectAnswer:H,updateCounters:U,selectedAnswer:l,setQuestion:J,hasQuestion:K}=me(),p=R("id",""),j=R("sectionId",""),d=k(),W=()=>{if(p.value!=="")if(d.value=void 0,K(p.value))J(p.value);else{const t=Q();if(!t){w.replace({name:$.Home});return}w.replace({params:{id:t}})}},C=k(!1);ke(()=>{ie(()=>[p.value,j.value],async(t,s)=>{s||(s=["",""]),!(!t[0]&&!t[1])&&(t[0]===s[0]&&t[1]===s[1]||((t[1]!==s[1]||!s[1])&&(t[1]?(C.value=!1,await G(t[1])):C.value||(C.value=!0,await M())),W()))},{immediate:!0})},{immediate:!0});let L;const b=k(!1);let _;const X=()=>{d.value=void 0,window.clearTimeout(L),_=void 0,window.clearTimeout(_),b.value=!0,_=window.setTimeout(async()=>{_=void 0,await w.replace({params:{id:Q()}}),await pe(l).toBeUndefined(),await ue(),b.value=!1},parseInt(n.pageFadeOutDuration,10))},h=()=>{var t,s;if(!_&&!(((t=r.value)==null?void 0:t.type)==="choice"&&!l.value)){if(((s=r.value)==null?void 0:s.type)==="text"&&!T.value){E();return}X()}},Y=t=>{const s=[];return t.id===-1&&s.push(n.dontKnowOption),l.value?l.value.isAnswer?t===l.value?n.correct:(s.push(n["wrong-fade"]),s):t===d.value?(s.push(n["correct-blinking"]),s):t.isAnswer?(s.push(n.correct),s):(s.push(n.wrong),s):s},Z=t=>{if(l.value){h();return}if(H(t),U(),!t.isAnswer){const s=O.value.find(i=>i.isAnswer);d.value=s}L=window.setTimeout(()=>{d.value=void 0},1e3)},y=k(!0),S=ne(()=>y.value?"es":v.value),V=t=>{te(t)||h()},N=()=>{var t;(t=window.getSelection())!=null&&t.isCollapsed&&(y.value=!y.value)},m=t=>D.t(S.value,t),ee=()=>{w.push({name:$.Settings})};function te(t){const s=t.target;return s.tagName==="BUTTON"||s.tagName==="A"}return(t,s)=>(c(),ae(ge,{onClick:V,class:a({[e(n).fadeOut]:b.value}),reserveSpace:!1},{topBar:x(()=>[o("div",{class:a(e(n).navigation)},[o("div",{onClick:f(ee,["stop"])},[I(_e,{type:"mdi",path:e(de)},null,8,["path"])])],2)]),default:x(()=>[e(r)?(c(),g("div",{key:0,class:a(e(n).question)},[o("div",{class:a(e(n).progress)},[o("div",{class:a(e(n).correctAnswers)},u(e(A).correctQuestions),3),o("div",{class:a(e(n).wrongAnswers)},u(e(A).wrongQuestions),3),o("div",{class:a(e(n).allAnswers)},u(e(A).totalQuestions),3)],2),o("div",{class:a(e(n).text),onClick:f(N,["stop"])},[o("div",null,[o("div",{class:a(e(n).sectionTitle)},u(m(e(r).section.title)),3),o("div",null,u(m(e(r).question)),1)])],2),o("div",{class:a(e(n).languageButtonContainer)},[e(v)!=="es"?(c(),g("div",{key:0,onClick:f(N,["stop"]),class:a(e(n).languageButton)},[o("span",{class:a(e(n).languageLabel)},"â†’ "+u(S.value===e(v)?e(B)("es"):e(B)(e(v))),3)],2)):z("",!0)],2),o("div",{class:a(e(n).answers)},[e(r).type==="choice"?(c(!0),g(P,{key:0},F(e(O),i=>(c(),g("div",{key:`${e(r).id}-${i.id}`,class:a(e(n).option)},[I(we,{onClick:f(q=>Z(i),["stop"]),disabled:!!e(l),class:a([e(n).button,Y(i)])},{default:x(()=>[ce(u(m(i.value)),1)]),_:2},1032,["onClick","disabled","class"])],2))),128)):z("",!0),e(r).type==="text"?(c(),g("div",{key:1,class:a([e(n).answer,e(T)?"":e(n).hiddenAnswer]),onClick:f(h,["stop"])},[(c(!0),g(P,null,F(m(e(r).answer).split(`
`),(i,q)=>(c(),g("p",{key:q},u(i),1))),128))],2)):z("",!0)],2)],2)):z("",!0)]),_:1},8,["class"]))}}),Ae="100ms",Ce="_counter_1fg5z_4",be="_question_1fg5z_8",he="_text_1fg5z_14",ye="_languageButtonContainer_1fg5z_45",xe="_answers_1fg5z_52",Be="_option_1fg5z_63",Te="_fadeOut_1fg5z_67",Oe="_button_1fg5z_73",Qe="_correct_1fg5z_73",Le="_success_1fg5z_1",Se="_wrong_1fg5z_80",Ne="_next_1fg5z_87",qe="_answer_1fg5z_52",Ie="_hiddenAnswer_1fg5z_100",Pe="_navigation_1fg5z_103",Fe="_back_1fg5z_110",Re="_forward_1fg5z_114",$e="_disabled_1fg5z_123",De="_progress_1fg5z_127",Me="_correctAnswers_1fg5z_145",Ge="_wrongAnswers_1fg5z_149",Ee="_allAnswers_1fg5z_153",He="_sectionTitle_1fg5z_168",Ue="_languageButton_1fg5z_45",Je="_languageLabel_1fg5z_193",Ke={pageFadeOutDuration:Ae,counter:Ce,question:be,text:he,languageButtonContainer:ye,answers:xe,option:Be,fadeOut:Te,button:Oe,correct:Qe,"correct-blinking":"_correct-blinking_1fg5z_77",success:Le,wrong:Se,"wrong-fade":"_wrong-fade_1fg5z_84",next:Ne,answer:qe,hiddenAnswer:Ie,navigation:Pe,back:Fe,forward:Re,disabled:$e,progress:De,correctAnswers:Me,wrongAnswers:Ge,allAnswers:Ee,sectionTitle:He,languageButton:Ue,languageLabel:Je},je={$style:Ke},nt=fe(ze,[["__cssModules",je]]);export{nt as default};
