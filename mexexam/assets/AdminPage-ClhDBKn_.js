import{q as j,V as X,a as S,v as B,y as W,J as t,x as i,E as s,D as r,W as m,X as $,H as v,I as f,F as u,G as k,u as H,O as q,M as I,Y}from"./vendor-MUXKnC7j.js";import{G as K,_ as R}from"./GeneralPage--sOEPSXl.js";import{u as Z}from"./index-C7Jt7QiS.js";import"./utils-B0mUfX74.js";const x=["disabled"],ee=["onUpdate:modelValue","placeholder"],se=["onClick"],te={key:0},oe=["onUpdate:modelValue"],le=["onClick"],ne=["onUpdate:modelValue","placeholder"],ae=["onClick"],ie=["onClick"],re=["onClick"],de=["onUpdate:modelValue"],ue=["onUpdate:modelValue"],ce=["onUpdate:modelValue","placeholder"],pe=["onUpdate:modelValue","placeholder"],ye=["onClick"],me=["onClick"],$e=["onUpdate:modelValue","placeholder"],ve=["onUpdate:modelValue","placeholder"],fe="Admin Panel",be=j({__name:"AdminPage",setup(os){const d=X({id:"",title:{es:"",en:"",ru:"",zh:""},sections:[]}),{locale:G}=Z(),g=S(!1),p=S(new Set),b=S(new Set),U=S(""),D=S("info"),C=["es","en","ru","zh"],V=async()=>{try{if(!("showOpenFilePicker"in window)){alert("File System Access API is not supported in this browser. Please use Chrome or Edge.");return}const[e]=await window.showOpenFilePicker({types:[{description:"JSON files",accept:{"application/json":[".json"]}}]}),l=await(await e.getFile()).text(),c=JSON.parse(l);Object.assign(d,c),g.value=!0,h("File loaded successfully!","success")}catch(e){console.error("Error loading file:",e),e.name!=="AbortError"&&h(`Error loading file: ${e.message}`,"error")}},P=async()=>{try{if(!("showSaveFilePicker"in window)){alert("File System Access API is not supported in this browser. Please use Chrome or Edge.");return}const o=await(await window.showSaveFilePicker({suggestedName:`${d.id||"questions"}.json`,types:[{description:"JSON files",accept:{"application/json":[".json"]}}]})).createWritable();await o.write(JSON.stringify(d,null,2)),await o.close(),h("File saved successfully!","success")}catch(e){console.error("Error saving file:",e),e.name!=="AbortError"&&h(`Error saving file: ${e.message}`,"error")}},L=()=>{Object.assign(d,{id:"new-dataset",title:{es:"",en:"",ru:"",zh:""},sections:[]}),g.value=!0,p.value.clear(),b.value.clear(),h("New dataset created","info")},O=()=>{const e={id:A(),title:{es:"",en:"",ru:"",zh:""},questions:[]};d.sections.push(e),p.value.add(d.sections.length-1)},N=e=>{if(confirm("Are you sure you want to delete this section and all its questions?")){d.sections.splice(e,1),p.value.delete(e);const o=new Set;p.value.forEach(l=>{l<e?o.add(l):l>e&&o.add(l-1)}),p.value=o}},E=e=>{p.value.has(e)?p.value.delete(e):p.value.add(e)},F=e=>{const o={id:A(),type:"choice",question:{es:"",en:"",ru:"",zh:""},answer:{es:"",en:"",ru:"",zh:""},options:[],note:{es:"",en:"",ru:"",zh:""}};d.sections[e].questions.push(o);const l=d.sections[e].questions.length-1;b.value.add(`${e}-${l}`)},M=(e,o)=>{confirm("Are you sure you want to delete this question?")&&(d.sections[e].questions.splice(o,1),b.value.delete(`${e}-${o}`))},T=(e,o)=>{const l=`${e}-${o}`;b.value.has(l)?b.value.delete(l):b.value.add(l)},Q=e=>{e.options.push({es:"",en:"",ru:"",zh:""})},z=(e,o)=>{e.options.splice(o,1)},A=()=>Math.random().toString(36).substring(2,8),h=(e,o)=>{U.value=e,D.value=o,setTimeout(()=>{U.value=""},3e3)};return(e,o)=>(i(),B(K,{class:t(e.$style.page),title:fe},{default:W(()=>[s("div",{class:t(e.$style.fileControls)},[s("button",{onClick:V,class:t(e.$style.btnPrimary)},"Load JSON File",2),s("button",{onClick:P,disabled:!g.value,class:t([e.$style.btnSuccess,{[e.$style.disabled]:!g.value}])},"Save JSON File",10,x),s("button",{onClick:L,class:t(e.$style.btnSecondary)},"New Dataset",2)],2),g.value?(i(),r("div",{key:1,class:t(e.$style.adminContent)},[s("div",{class:t(e.$style.section)},[o[4]||(o[4]=s("h2",null,"Dataset Information",-1)),s("div",{class:t(e.$style.formGroup)},[o[2]||(o[2]=s("label",null,"Dataset ID:",-1)),m(s("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>d.id=l),type:"text",class:t(e.$style.formControl)},null,2),[[$,d.id]])],2),s("div",{class:t(e.$style.formGroup)},[o[3]||(o[3]=s("label",null,"Title:",-1)),s("div",{class:t(e.$style.multilangInput)},[(i(),r(v,null,f(C,l=>s("div",{key:l,class:t(e.$style.langGroup)},[s("span",{class:t(e.$style.langLabel)},u(l.toUpperCase()),3),m(s("input",{"onUpdate:modelValue":c=>d.title[l]=c,type:"text",class:t(e.$style.formControl),placeholder:`Title in ${l.toUpperCase()}`},null,10,ee),[[$,d.title[l]]])],2)),64))],2)],2)],2),s("div",{class:t(e.$style.section)},[s("div",{class:t(e.$style.sectionHeader)},[s("h2",null,"Sections ("+u(d.sections.length)+")",1),s("button",{onClick:O,class:t(e.$style.btnPrimary)},"Add Section",2)],2),s("div",{class:t(e.$style.sectionsList)},[(i(!0),r(v,null,f(d.sections,(l,c)=>(i(),r("div",{key:l.id,class:t(e.$style.sectionCard)},[s("div",{class:t(e.$style.sectionCardHeader),onClick:n=>E(c)},[s("h3",null,u(l.title[H(G)]||"Unnamed Section"),1),p.value.has(c)?(i(),r("div",te,[m(s("input",{"onUpdate:modelValue":n=>l.id=n,type:"text",class:t(e.$style.formControl)},null,10,oe),[[$,l.id]])])):k("",!0),s("div",{class:t(e.$style.sectionActions)},[s("button",{onClick:q(n=>N(c),["stop"]),class:t(e.$style.btnDanger)},"Delete",10,le)],2)],10,se),p.value.has(c)?(i(),r("div",{key:0,class:t(e.$style.sectionDetails)},[s("div",{class:t(e.$style.formGroup)},[s("div",{class:t(e.$style.multilangInput)},[(i(),r(v,null,f(C,n=>s("div",{key:n,class:t(e.$style.langGroup)},[s("span",{class:t(e.$style.langLabel)},u(n.toUpperCase()),3),m(s("input",{"onUpdate:modelValue":w=>l.title[n]=w,type:"text",class:t(e.$style.formControl),placeholder:`Section title in ${n.toUpperCase()}`},null,10,ne),[[$,l.title[n]]])],2)),64))],2)],2),s("div",{class:t(e.$style.questionsSection)},[s("div",{class:t(e.$style.questionsHeader)},[s("h4",null,"Questions ("+u(l.questions.length)+")",1),s("button",{onClick:n=>F(c),class:t(e.$style.btnPrimary)},"Add Question",10,ae)],2),s("div",{class:t(e.$style.questionsList)},[(i(!0),r(v,null,f(l.questions,(n,w)=>(i(),r("div",{key:n.id,class:t(e.$style.questionCard)},[s("div",{class:t(e.$style.questionHeader),onClick:a=>T(c,w)},[s("span",{class:t(e.$style.questionTitle)},[I(u(n.question[H(G)]||"Unnamed Question")+" ",1),s("small",null,u(n.note[H(G)]||"No note"),1)],2),s("div",{class:t(e.$style.questionActions)},[s("button",{onClick:q(a=>M(c,w),["stop"]),class:t([e.$style.btnDanger,e.$style.btnSm])}," Delete ",10,re)],2)],10,ie),b.value.has(`${c}-${w}`)?(i(),r("div",{key:0,class:t(e.$style.questionDetails)},[s("div",{class:t(e.$style.formGroup)},[o[5]||(o[5]=s("label",null,"Question ID:",-1)),m(s("input",{"onUpdate:modelValue":a=>n.id=a,type:"text",class:t(e.$style.formControl)},null,10,de),[[$,n.id]])],2),s("div",{class:t(e.$style.formGroup)},[o[7]||(o[7]=s("label",null,"Type:",-1)),m(s("select",{"onUpdate:modelValue":a=>n.type=a,class:t(e.$style.formControl)},o[6]||(o[6]=[s("option",{value:"choice"},"Multiple Choice",-1),s("option",{value:"text"},"Text/Essay",-1)]),10,ue),[[Y,n.type]])],2),s("div",{class:t(e.$style.formGroup)},[o[8]||(o[8]=s("label",null,"Question:",-1)),s("div",{class:t(e.$style.multilangInput)},[(i(),r(v,null,f(C,a=>s("div",{key:a,class:t(e.$style.langGroup)},[s("span",{class:t(e.$style.langLabel)},u(a.toUpperCase()),3),m(s("textarea",{"onUpdate:modelValue":y=>n.question[a]=y,class:t(e.$style.formControl),placeholder:`Question text in ${a.toUpperCase()}`,rows:"2"},null,10,ce),[[$,n.question[a]]])],2)),64))],2)],2),s("div",{class:t(e.$style.formGroup)},[o[9]||(o[9]=s("label",null,"Answer:",-1)),s("div",{class:t(e.$style.multilangInput)},[(i(),r(v,null,f(C,a=>s("div",{key:a,class:t(e.$style.langGroup)},[s("span",{class:t(e.$style.langLabel)},u(a.toUpperCase()),3),m(s("textarea",{"onUpdate:modelValue":y=>n.answer[a]=y,class:t(e.$style.formControl),placeholder:`Answer in ${a.toUpperCase()}`,rows:"3"},null,10,pe),[[$,n.answer[a]]])],2)),64))],2)],2),n.type==="choice"?(i(),r("div",{key:0,class:t(e.$style.formGroup)},[s("div",{class:t(e.$style.optionsHeader)},[o[10]||(o[10]=s("label",null,"Options:",-1)),s("button",{onClick:a=>Q(n),class:t([e.$style.btnSecondary,e.$style.btnSm])},"Add Option",10,ye)],2),(i(!0),r(v,null,f(n.options,(a,y)=>(i(),r("div",{key:y,class:t(e.$style.optionGroup)},[s("div",{class:t(e.$style.optionHeader)},[s("span",null,"Option "+u(y+1),1),s("button",{onClick:_=>z(n,y),class:t([e.$style.btnDanger,e.$style.btnXs])}," Ã— ",10,me)],2),s("div",{class:t(e.$style.multilangInput)},[(i(),r(v,null,f(C,_=>s("div",{key:_,class:t(e.$style.langGroup)},[s("span",{class:t(e.$style.langLabel)},u(_.toUpperCase()),3),m(s("input",{"onUpdate:modelValue":J=>a[_]=J,type:"text",class:t(e.$style.formControl),placeholder:`Option ${y+1} in ${_.toUpperCase()}`},null,10,$e),[[$,a[_]]])],2)),64))],2)],2))),128))],2)):k("",!0),s("div",{class:t(e.$style.formGroup)},[o[11]||(o[11]=s("label",null,"Note/Explanation:",-1)),s("div",{class:t(e.$style.multilangInput)},[(i(),r(v,null,f(C,a=>s("div",{key:a,class:t(e.$style.langGroup)},[s("span",{class:t(e.$style.langLabel)},u(a.toUpperCase()),3),m(s("textarea",{"onUpdate:modelValue":y=>n.note[a]=y,class:t(e.$style.formControl),placeholder:`Note/explanation in ${a.toUpperCase()}`,rows:"8"},null,10,ve),[[$,n.note[a]]])],2)),64))],2)],2)],2)):k("",!0)],2))),128))],2)],2)],2)):k("",!0)],2))),128))],2)],2)],2)):(i(),r("div",{key:0,class:t(e.$style.emptyState)},o[1]||(o[1]=[s("p",null,"Please load a JSON file or create a new dataset to begin managing questions.",-1)]),2)),U.value?(i(),r("div",{key:2,class:t([e.$style.statusMessage,e.$style[D.value]])},u(U.value),3)):k("",!0)]),_:1},8,["class"]))}}),Ce="_page_1o12y_1",_e="_adminContent_1o12y_8",ge="_fileControls_1o12y_11",he="_btnPrimary_1o12y_20",we="_btnSecondary_1o12y_27",Se="_btnSuccess_1o12y_34",ke="_disabled_1o12y_41",Ue="_btnDanger_1o12y_45",Ge="_btnSm_1o12y_52",He="_btnXs_1o12y_56",De="_emptyState_1o12y_60",Ae="_section_1o12y_66",qe="_sectionsList_1o12y_67",Ve="_formGroup_1o12y_70",Pe="_formControl_1o12y_79",Le="_multilangInput_1o12y_86",Oe="_langGroup_1o12y_91",Ne="_langLabel_1o12y_97",Ee="_sectionHeader_1o12y_102",Fe="_questionsHeader_1o12y_103",Me="_sectionCard_1o12y_109",Te="_sectionCardHeader_1o12y_115",Qe="_sectionActions_1o12y_128",ze="_sectionDetails_1o12y_134",Je="_questionCard_1o12y_137",je="_questionHeader_1o12y_143",Xe="_questionTitle_1o12y_151",Be="_questionActions_1o12y_160",We="_questionDetails_1o12y_164",Ie="_optionsHeader_1o12y_167",Ye="_optionGroup_1o12y_173",Ke="_optionHeader_1o12y_179",Re="_statusMessage_1o12y_185",Ze="_success_1o12y_195",xe="_error_1o12y_200",es="_info_1o12y_205",ss={page:Ce,adminContent:_e,fileControls:ge,btnPrimary:he,btnSecondary:we,btnSuccess:Se,disabled:ke,btnDanger:Ue,btnSm:Ge,btnXs:He,emptyState:De,section:Ae,sectionsList:qe,formGroup:Ve,formControl:Pe,multilangInput:Le,langGroup:Oe,langLabel:Ne,sectionHeader:Ee,questionsHeader:Fe,sectionCard:Me,sectionCardHeader:Te,sectionActions:Qe,sectionDetails:ze,questionCard:Je,questionHeader:je,questionTitle:Xe,questionActions:Be,questionDetails:We,optionsHeader:Ie,optionGroup:Ye,optionHeader:Ke,statusMessage:Re,success:Ze,error:xe,info:es},ts={$style:ss},rs=R(be,[["__cssModules",ts]]);export{rs as default};
