import{q as ae,a as A,k as re,v as ie,y as L,J as o,u as e,T as ce,x as i,E as a,O as w,L as M,D as u,F as l,G as f,H as O,I as S,w as ue,M as le,n as de}from"./vendor-MUXKnC7j.js";import{u as _e,G as ve,m as ge,S as we,_ as fe}from"./GeneralPage-U7Hu4whR.js";import{G as pe}from"./GeneralButton-k63r3da1.js";import{u as me}from"./translations-B9wJDgVj.js";import{d as $,e as ke}from"./utils-B0mUfX74.js";import{u as Ae}from"./free-session-ZuC99YaR.js";import{u as Ce,R as C}from"./index-BITPBKhr.js";import{u as he}from"./activatable-effect-CF1XfpK3.js";import{u as be}from"./preferences-56dZKsPG.js";import"./questions-Ckzwe_sO.js";import"./statistics-Bd1wb4X0.js";const ye=ae({__name:"QuestionPage",setup(et){const n=ce(),I=me(),{locale:_,getLanguageName:N}=Ce(),{showNotes:z}=be(),{startAll:E,startSection:H,stat:h,isAnswerRevealed:q,currentOptionsRandomized:P,currentQuestion:r,getRandomQuestionId:F,revealAnswer:U,selectAnswer:J,updateCounters:K,selectedAnswer:d,setQuestion:j,hasQuestion:W}=Ae(),{pushLocale:X,replaceLocale:b}=_e(),p=$("id",""),y=$("sectionId",""),v=A(),Y=()=>{if(p.value!=="")if(v.value=void 0,W(p.value))j(p.value);else{const t=F();if(!t){b(C.Home);return}b(C.SectionQuestions,{sectionId:y.value||"all",id:t})}},x=A(!1);he(()=>{ue(()=>[p.value,y.value],async(t,s)=>{s||(s=["",""]),!(!t[0]&&!t[1])&&(t[0]===s[0]&&t[1]===s[1]||((t[1]!==s[1]||!s[1])&&(t[1]&&t[1]!=="all"?(x.value=!1,await H(t[1])):x.value||(x.value=!0,await E())),Y()))},{immediate:!0})},{immediate:!0});let R;const B=A(!1);let g;const Z=()=>{v.value=void 0,window.clearTimeout(R),g=void 0,window.clearTimeout(g),B.value=!0,g=window.setTimeout(async()=>{g=void 0,await b(C.SectionQuestions,{sectionId:y.value||"all",id:F()}),await ke(d).toBeUndefined(),await de(),B.value=!1},parseInt(n.pageFadeOutDuration,10))},Q=()=>{var t,s;if(!g&&!(((t=r.value)==null?void 0:t.type)==="choice"&&!d.value)){if(((s=r.value)==null?void 0:s.type)==="text"&&!q.value){U();return}Z()}},V=t=>{const s=[];return t.id===-1&&s.push(n.dontKnowOption),d.value?d.value.isAnswer?t===d.value?n.correct:(s.push(n["wrong-fade"]),s):t===v.value?(s.push(n["correct-blinking"]),s):t.isAnswer?(s.push(n.correct),s):(s.push(n.wrong),s):s},ee=t=>{if(d.value){Q();return}if(J(t),K(),!t.isAnswer){const s=P.value.find(c=>c.isAnswer);v.value=s}R=window.setTimeout(()=>{v.value=void 0},1e3)},T=A(!0),D=re(()=>T.value?"es":_.value),te=t=>{oe(t)||Q()},G=()=>{var t;(t=window.getSelection())!=null&&t.isCollapsed&&(T.value=!T.value)},m=t=>I.t(D.value,t),se=t=>I.t(_.value,t),ne=()=>{X(C.Settings)};function oe(t){const s=t.target;return s.tagName==="BUTTON"||s.tagName==="A"}return(t,s)=>(i(),ie(ve,{onClick:te,class:o({[e(n).fadeOut]:B.value}),reserveSpace:!1},{topBar:L(()=>[a("div",{class:o(e(n).navigation)},[a("div",{onClick:w(ne,["stop"])},[M(we,{type:"mdi",path:e(ge)},null,8,["path"])])],2)]),default:L(()=>[e(r)?(i(),u("div",{key:0,class:o(e(n).question)},[a("div",{class:o(e(n).progress)},[a("div",{class:o(e(n).correctAnswers)},l(e(h).correctQuestions),3),a("div",{class:o(e(n).wrongAnswers)},l(e(h).wrongQuestions),3),a("div",{class:o(e(n).allAnswers)},l(e(h).totalQuestions),3)],2),a("div",{class:o(e(n).text),onClick:w(G,["stop"])},[a("div",null,[a("div",{class:o(e(n).sectionTitle)},l(m(e(r).section.title)),3),a("div",null,l(m(e(r).question)),1)])],2),a("div",{class:o(e(n).languageButtonContainer)},[e(_)!=="es"?(i(),u("div",{key:0,onClick:w(G,["stop"]),class:o(e(n).languageButton)},[a("span",{class:o(e(n).languageLabel)},"â†’ "+l(D.value===e(_)?e(N)("es"):e(N)(e(_))),3)],2)):f("",!0)],2),a("div",{class:o(e(n).answers)},[e(r).type==="choice"?(i(!0),u(O,{key:0},S(e(P),c=>(i(),u("div",{key:`${e(r).id}-${c.id}`,class:o(e(n).option)},[M(pe,{onClick:w(k=>ee(c),["stop"]),disabled:!!e(d),class:o([e(n).button,V(c)])},{default:L(()=>[le(l(m(c.value)),1)]),_:2},1032,["onClick","disabled","class"])],2))),128)):f("",!0),e(r).type==="text"?(i(),u("div",{key:1,class:o([e(n).answer,e(q)?"":e(n).hiddenAnswer]),onClick:w(Q,["stop"])},[(i(!0),u(O,null,S(m(e(r).answer).split(`
`),(c,k)=>(i(),u("p",{key:k},l(c),1))),128))],2)):f("",!0),e(d)&&e(r).note&&e(z)?(i(),u("div",{key:2,class:o(e(n).note)},[(i(!0),u(O,null,S(se(e(r).note).split(`
`),(c,k)=>(i(),u("p",{key:k},l(c),1))),128))],2)):f("",!0)],2)],2)):f("",!0)]),_:1},8,["class"]))}}),xe="100ms",Be="_counter_381ov_4",Qe="_question_381ov_8",Te="_text_381ov_14",Le="_languageButtonContainer_381ov_45",Oe="_answers_381ov_52",Se="_option_381ov_63",Ie="_fadeOut_381ov_67",Ne="_button_381ov_73",qe="_correct_381ov_73",Pe="_success_381ov_1",Fe="_wrong_381ov_80",Re="_next_381ov_87",De="_answer_381ov_52",Ge="_hiddenAnswer_381ov_100",Me="_navigation_381ov_103",$e="_back_381ov_110",ze="_forward_381ov_114",Ee="_disabled_381ov_123",He="_progress_381ov_127",Ue="_correctAnswers_381ov_145",Je="_wrongAnswers_381ov_149",Ke="_allAnswers_381ov_153",je="_sectionTitle_381ov_168",We="_languageButton_381ov_45",Xe="_languageLabel_381ov_193",Ye="_note_381ov_197",Ze={pageFadeOutDuration:xe,counter:Be,question:Qe,text:Te,languageButtonContainer:Le,answers:Oe,option:Se,fadeOut:Ie,button:Ne,correct:qe,"correct-blinking":"_correct-blinking_381ov_77",success:Pe,wrong:Fe,"wrong-fade":"_wrong-fade_381ov_84",next:Re,answer:De,hiddenAnswer:Ge,navigation:Me,back:$e,forward:ze,disabled:Ee,progress:He,correctAnswers:Ue,wrongAnswers:Je,allAnswers:Ke,sectionTitle:je,languageButton:We,languageLabel:Xe,note:Ye},Ve={$style:Ze},_t=fe(ye,[["__cssModules",Ve]]);export{_t as default};
