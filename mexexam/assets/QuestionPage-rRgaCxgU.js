import{q as se,a as k,w as ne,k as ae,v as oe,y as B,F as a,u as e,T as re,p as ie,x as c,E as o,J as f,N as P,D as d,H as l,I as A,L as F,M as R,O as ce,n as le}from"./vendor-mc0iK3xg.js";import{u as ue,G as de,m as _e,S as we,_ as fe}from"./localization-BhKRn0ym.js";import{G as ge}from"./GeneralButton-C_kG9pcd.js";import{a as ve}from"./questions-C7rpE9C6.js";import{e as $,f as pe}from"./utils-BRnDto5j.js";import{u as me}from"./free-session-jtCszjU5.js";import{R as D}from"./index-BUb-8ZT7.js";const ke=se({__name:"QuestionPage",setup(je){const n=re(),g=ie(),M=ve(),{locale:v,getLanguageName:T}=ue(),{startAll:G,startSection:z,stat:C,isAnswerRevealed:O,currentOptionsRandomized:Q,currentQuestion:r,getRandomQuestionId:L,revealAnswer:E,selectAnswer:H,updateCounters:U,selectedAnswer:u,setQuestion:J,hasQuestion:K}=me(),p=$("id",""),j=$("sectionId",""),_=k(),W=()=>{if(p.value!=="")if(_.value=void 0,K(p.value))J(p.value);else{const t=L();if(!t){g.replace({name:D.Home});return}g.replace({params:{id:t}})}},h=k(!1);ne(()=>[p.value,j.value],async(t,s)=>{s||(s=["",""]),!(!t[0]&&!t[1])&&(t[0]===s[0]&&t[1]===s[1]||((t[1]!==s[1]||!s[1])&&(t[1]?(h.value=!1,await z(t[1])):h.value||(h.value=!0,await G())),W()))},{immediate:!0});let S;const b=k(!1);let w;const X=()=>{_.value=void 0,window.clearTimeout(S),w=void 0,window.clearTimeout(w),b.value=!0,w=window.setTimeout(async()=>{w=void 0,await g.replace({params:{id:L()}}),await pe(u).toBeUndefined(),await le(),b.value=!1},parseInt(n.pageFadeOutDuration,10))},y=()=>{var t,s;if(!w&&!(((t=r.value)==null?void 0:t.type)==="choice"&&!u.value)){if(((s=r.value)==null?void 0:s.type)==="text"&&!O.value){E();return}X()}},Y=t=>{const s=[];return t.id===-1&&s.push(n.dontKnowOption),u.value?u.value.isAnswer?t===u.value?n.correct:(s.push(n["wrong-fade"]),s):t===_.value?(s.push(n["correct-blinking"]),s):t.isAnswer?(s.push(n.correct),s):(s.push(n.wrong),s):s},Z=t=>{if(u.value){y();return}if(H(t),U(),!t.isAnswer){const s=Q.value.find(i=>i.isAnswer);_.value=s}S=window.setTimeout(()=>{_.value=void 0},1e3)},x=k(!0),N=ae(()=>x.value?"es":v.value),V=t=>{te(t)||y()},q=()=>{var t;(t=window.getSelection())!=null&&t.isCollapsed&&(x.value=!x.value)},m=t=>M.t(N.value,t),ee=()=>{g.push({name:D.Settings})};function te(t){const s=t.target;return s.tagName==="BUTTON"||s.tagName==="A"}return(t,s)=>(c(),oe(de,{onClick:V,class:a({[e(n).fadeOut]:b.value}),reserveSpace:!1},{topBar:B(()=>[o("div",{class:a(e(n).navigation)},[o("div",{onClick:f(ee,["stop"])},[P(we,{type:"mdi",path:e(_e)},null,8,["path"])])],2)]),default:B(()=>[e(r)?(c(),d("div",{key:0,class:a(e(n).question)},[o("div",{class:a(e(n).progress)},[o("div",{class:a(e(n).correctAnswers)},l(e(C).correctQuestions),3),o("div",{class:a(e(n).wrongAnswers)},l(e(C).wrongQuestions),3),o("div",{class:a(e(n).allAnswers)},l(e(C).totalQuestions),3)],2),o("div",{class:a(e(n).text),onClick:f(q,["stop"])},[o("div",null,[o("div",{class:a(e(n).sectionTitle)},l(m(e(r).section.title)),3),o("div",null,l(m(e(r).question)),1)])],2),o("div",{class:a(e(n).languageButtonContainer)},[e(v)!=="es"?(c(),d("div",{key:0,onClick:f(q,["stop"]),class:a(e(n).languageButton)},[o("span",{class:a(e(n).languageLabel)},"â†’ "+l(N.value===e(v)?e(T)("es"):e(T)(e(v))),3)],2)):A("",!0)],2),o("div",{class:a(e(n).answers)},[e(r).type==="choice"?(c(!0),d(F,{key:0},R(e(Q),i=>(c(),d("div",{key:`${e(r).id}-${i.id}`,class:a(e(n).option)},[P(ge,{onClick:f(I=>Z(i),["stop"]),disabled:!!e(u),class:a([e(n).button,Y(i)])},{default:B(()=>[ce(l(m(i.value)),1)]),_:2},1032,["onClick","disabled","class"])],2))),128)):A("",!0),e(r).type==="text"?(c(),d("div",{key:1,class:a([e(n).answer,e(O)?"":e(n).hiddenAnswer]),onClick:f(y,["stop"])},[(c(!0),d(F,null,R(m(e(r).answer).split(`
`),(i,I)=>(c(),d("p",{key:I},l(i),1))),128))],2)):A("",!0)],2)],2)):A("",!0)]),_:1},8,["class"]))}}),Ae="100ms",Ce="_counter_lwft7_4",he="_question_lwft7_8",be="_text_lwft7_13",ye="_languageButtonContainer_lwft7_44",xe="_answers_lwft7_51",Be="_option_lwft7_62",Te="_fadeOut_lwft7_66",Oe="_button_lwft7_72",Qe="_correct_lwft7_72",Le="_success_lwft7_1",Se="_wrong_lwft7_79",Ne="_next_lwft7_86",qe="_answer_lwft7_51",Ie="_hiddenAnswer_lwft7_99",Pe="_navigation_lwft7_102",Fe="_back_lwft7_109",Re="_forward_lwft7_113",$e="_disabled_lwft7_122",De="_progress_lwft7_126",Me="_correctAnswers_lwft7_144",Ge="_wrongAnswers_lwft7_148",ze="_allAnswers_lwft7_152",Ee="_sectionTitle_lwft7_167",He="_languageButton_lwft7_44",Ue="_languageLabel_lwft7_192",Je={pageFadeOutDuration:Ae,counter:Ce,question:he,text:be,languageButtonContainer:ye,answers:xe,option:Be,fadeOut:Te,button:Oe,correct:Qe,"correct-blinking":"_correct-blinking_lwft7_76",success:Le,wrong:Se,"wrong-fade":"_wrong-fade_lwft7_83",next:Ne,answer:qe,hiddenAnswer:Ie,navigation:Pe,back:Fe,forward:Re,disabled:$e,progress:De,correctAnswers:Me,wrongAnswers:Ge,allAnswers:ze,sectionTitle:Ee,languageButton:He,languageLabel:Ue},Ke={$style:Je},st=fe(ke,[["__cssModules",Ke]]);export{st as default};
